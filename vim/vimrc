set nocompatible " use vim settings not vi
colorscheme wombat256mod


"""""""""""""""""""""""" STATUSLINE """"""""""""""""""""""""
" full statusline colors defined in ~/.vim/plugin/statline.vim
function! InsertStatuslineColor(mode)
 if a:mode == 'i'
    hi User6 ctermfg=green ctermbg=235
  elseif a:mode == 'c'
    hi User6 ctermfg=green ctermbg=232
  elseif a:mode == 'x'
    hi User6 ctermfg=green ctermbg=232
  endif
endfunction
" change statusline color depending on mode
au InsertEnter * call InsertStatuslineColor(v:insertmode)
au InsertChange * call InsertStatuslineColor('c')
au InsertLeave * call InsertStatuslineColor('x')
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

""""""""""""""""""" relative line number """""""""""""""""""
autocmd InsertEnter * :set number
autocmd InsertLeave * :set relativenumber

function! g:ToggleNuMode()
  if(&rnu == 1)
    set nu
  else
    set rnu
  endif
endfunc 
nnoremap <C-L> :call g:ToggleNuMode()<cr>

""""""""" function to remove trailing whitespaces """"""""""
fun! StripTrailingWhitespaces()
    let l = line(".")
    let c = col(".")
    %s/\s\+$//e
    call cursor(l, c)
endfun
" call function on write for these file types
autocmd FileType c,cpp,java,php,ruby,python autocmd BufWritePre <buffer> :call StripTrailingWhitespaces()
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" vim.org script 4168, defined in autoload/SyntaxRange.vim
" documentation in .vim/doc/SyntaxRange.txt
" last parameter is optional and can be any highlight group
" putting call in vimrc makes it auto do things when the file loads.
call SyntaxRange#Include('@begin=c@', '@end=c@', 'c', 'NonText')

execute pathogen#infect()


" general stuff
syntax on
set ttyfast "we have a fast terminal (?)
set restorescreen=on " restore screen contents on exit
set title titlelen=150
set titlestring=
set titlestring+=%t\  " file name
set titlestring+=(%F) " full file path + name
set relativenumber
set backspace=indent,eol,start " allow backspace in insert mode
set autoread " reload files changed outside of vim
set noruler
set laststatus=2
set history=1000
set showmode
set showcmd
set showmatch
set cursorline

" keybinds
set pastetoggle=<INS>
nmap <F1> :let @+=@"<CR>
nmap <F2> :set list!<CR>
nmap <F3> :call StripTrailingWhitespaces()<CR>
nmap <F11>  zR
nmap <F12>  zM


" searching
set incsearch "find as you type
set hlsearch  "hilight search terms
set ignorecase "case insensitive search

" folding: zf#j manually folds # lines, or zf in visual mode selection.
" zo=open, zO=open all levels, zc=close, za=toggle.  zr=open all first level, zR = open all, mM for close all
" zj and zk to move between folds
" ':#,# fo' folds # through #
" zfa}, zfa], zfa) for matching closer, works same from closers (zfa{)
set foldmethod=syntax
set foldnestmax=1
nnoremap <silent> <Space> @=(foldlevel('.')?'za':"\<Space>")<CR>
vnoremap <space> zf
"au BufWinLeave * mkview
"au BufWinEnter * silent loadview


" tab/indent stuff
set autoindent
set smartindent
set smarttab
set shiftwidth=2
set softtabstop=2
set tabstop=2
set expandtab
filetype plugin on " either this or the below one causes comment token to be auto added when hitting enter from comment
filetype indent on " manually overrode this for c/cpp files in .vim/after/ftplugin/c.vim
set linebreak " wrap lines at nice points
set textwidth=0
"set nowrap " don't wrap lines


" scroll stuff
set scrolljump=5 "lines to scroll when cursor leaves screen
set scrolloff=8 "start scrolling when 8 lines away from margins
"set sidescrolloff=15
"set sidescroll=1


" make :set list (show whitespace chars) nicer, don't show EOL
if &listchars ==# 'eol:$'
  set listchars=tab:>\ ,trail:-,extends:>,precedes:<,nbsp:+
  if &termencoding ==# 'utf-8' || &encoding ==# 'utf-8'
    let &listchars = "tab:\u21e5 ,trail:\u2423,extends:\u21c9,precedes:\u21c7,nbsp:\u00b7"
  endif
endif

" highlight end of line whitespcae
" match Todo /\s\+$/

" latex stuff
set grepprg=grep\ -nH\ $*
let g:tex_flavor = "latex"

